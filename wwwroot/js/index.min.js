function init(n){n.Ion.defaultAccessToken="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIzZDMwNTQ3ZC0xYjE5LTQ5MTUtYmM4ZC0yOTgwYTg4ZDA0N2EiLCJpZCI6MTQwNzcsInNjb3BlcyI6WyJhc3IiLCJnYyJdLCJpYXQiOjE1NjQ3MDg4OTJ9.YUsZDqZPckX3GwlCCuqfoOVZokwMKdySqrkVgKUv5dA";var i=new n.WebMapTileServiceImageryProvider({url:"http://t0.tianditu.com/vec_w/wmts?service=wmts&request=GetTile&version=1.0.0&LAYER=vec&tileMatrixSet=w&TileMatrix={TileMatrix}&TileRow={TileRow}&TileCol={TileCol}&style=default&format=tiles&tk=f5bb12c6cae196cd462140e3a1bccddd",tilingScheme:new n.WebMercatorTilingScheme,fileExtension:"png",minimumLevel:0,maximumLevel:13}),t=new n.Viewer("cesiumContainer",{animation:!1,baseLayerPicker:!1,imageryProvider:i,geocoder:!1,timeline:!1,sceneModePicker:!1,navigationHelpButton:!1,infoBox:!0,baseLayerPicker:!1,homeButton:!1,selectionIndicator:!1,contextOptions:{webgl:{alpha:!1}},fullscreenButton:!1,infoBox:!1});return t._cesiumWidget._creditContainer.style.display="none",t}function init1(n){n.Ion.defaultAccessToken="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIzZDMwNTQ3ZC0xYjE5LTQ5MTUtYmM4ZC0yOTgwYTg4ZDA0N2EiLCJpZCI6MTQwNzcsInNjb3BlcyI6WyJhc3IiLCJnYyJdLCJpYXQiOjE1NjQ3MDg4OTJ9.YUsZDqZPckX3GwlCCuqfoOVZokwMKdySqrkVgKUv5dA";var t,i=new n.UrlTemplateImageryProvider({url:"http://localhost:5052/DATA/Img/{z}/{x}/{y}.png"});return t=new n.Viewer("cesiumContainer",{terrainExaggeration:.95,baseLayerPicker:!1,fullscreenButton:!1,geocoder:!1,homeButton:!1,navigationHelpButton:!1,sceneModePicker:!1,timeline:!1,animation:!1,selectionIndicator:!1,infoBox:!1}),t._cesiumWidget._creditContainer.style.display="none",t.scene.globe.showGroundAtmosphere=!1,t.scene.globe.baseColor=new n.Color(1,1,1,0),t.camera.setView({destination:new n.Cartesian3.fromDegrees(99,36.4,18000008),orientation:{}}),t.scene.globe.depthTestAgainstTerrain=!0,t}function add3DtilesNoStyle(n,t){var i=n.scene.primitives.add(new Cesium.Cesium3DTileset({url:t}));i.readyPromise.then(function(){n.zoomTo(i)})}function add3DTilesetData(n,t,i){var u=get3DTilesData(n,t),r;u!=undefined||(r=new Cesium.Cesium3DTileset({url:t}),r.style=i,n.scene.primitives.add(r),addListener(r),r.readyPromise.then(function(i){var r,u;if(n.zoomTo(i),r=i.properties,Cesium.defined(r))for(u in r);t==XINYI_CLASSIF_MODEL_DOWN_URL&&(i.style=XINYI_CLASSIF_MODEL_STYLE)}))}function get3DTilesData(n,t){for(var u,r=n.scene.primitives,i=0;i<r.length;i++)r._primitives[i]._url==t&&(u=r._primitives[i]);return u}function removeAllTiles(n){for(var i=n.scene.primitives,t=i.length-1;t>-1;t--)n.scene.primitives.remove(i._primitives[t])}function remove3dtiles(n,t){var u=get3DTilesData(n,t),r,i;if(u!=undefined)for(r=n.scene.primitives,i=0;i<r.length;i++)r._primitives[i]._url==t&&n.scene.primitives.remove(r._primitives[i]);else console.log("当前场景中不存在此数据")}function add3Dtiles(n,t,i){var r=n.scene.primitives.add(new Cesium.Cesium3DTileset({url:t}));r.style=i;r.readyPromise.then(function(t){n.zoomTo(t,new HeadingPitchRange(0,-1,t.boundingSphere.radius));var r=t.boundingSphere.center,i=Cartographic.fromCartesian(r,n.scene.globe.ellipsoid);i.height=t.boundingSphere.radius*1.5;CesiumNavigation.terria.options.defaultResetView=i});r.tileLoad.addEventListener(function(n){processTileFeatures(n,function(n){for(var r,f,i=n.getPropertyNames(),u=i.length,t=0;t<u;++t)r=i[t],f=n.getProperty(r)})})}function set3DTileForFLStyle(n,t){var i=[],u="${"+n+"} === '"+t+"'",f=[u,"rgb(255,0,0)"],r;return i.push(f),r=["true","rgba(0,0,0,0.002)"],i.push(r),new Cesium.Cesium3DTileStyle({color:{conditions:i}})}function set3DTileStyle(n,t){var i=[],u="${"+n+"} === '"+t+"'",f=[u,"rgb(255,255,255)"],r;return i.push(f),r=["true","rgba(0,0,0,0.002)"],i.push(r),new Cesium.Cesium3DTileStyle({color:{conditions:i}})}function addListener(n){var i=viewer.scene,t=new Cesium.ScreenSpaceEventHandler(viewer.scene.canvas);t.setInputAction(function(t){var i=viewer.scene.pick(t.position);console.log("选中的要素",i);i&&(selectFeature(i,n),getAllProperty(i))},Cesium.ScreenSpaceEventType.LEFT_CLICK)}function selectFeature(n,t){var i=n.getProperty("id"),r="${id} ==="+i,u=new Cesium.Cesium3DTileStyle({color:{conditions:[[r,"rgb(255,255,0)"],["true","rgb(127, 59, 8)"],]}});t.style=u}function getAllProperty(n){var r=n.getPropertyNames(),u,t,i,f;for(console.log(r),u=r.length,t=0;t<u;++t)i=r[t],f=n.getProperty(i),console.log(i+":"+n.getProperty(i))}function getFeaturePos(n,t){var u=n.getPropertyNames(),f,i,r,e;for(console.log(u),f=u.length,i=0;i<f;++i)r=u[i],e=n.getProperty(r),e==t,console.log(r+":"+n.getProperty(r))}function add3DTileByHeight(n){tileset=viewer.scene.primitives.add(new Cesium.Cesium3DTileset({url:n}));tileset.readyPromise.then(n=>{setColorByHeight(),viewer.flytTo(n)})}function setColorByHeight(){tileset.style=new Cesium.Cesium3DTileStyle({color:{conditions:[["${height}>=300","rgba(45,0,75,0.5)"],["${height}>=200","rgba(102,71,151)"],["${height}>=100","rgba(170,162,204)"],["${height}>=50","rgba(224,226,238)"],["${height}>=25","rgba(252,230,200)"],["${height}>=10","rgba(248,176,87)"],["${height}>=5","rgba(198,106,11)"],["true","rgba(127,59,8)"]]}})}function colorByDistance(){tileset.style=new Cesium.Cesium3DTileStyle({defines:{distance:`distance(vec2(${longitude},${latitude}),vec2(-1.291777521, 0.7105706624))`},color:{conditions:[[`${distance}>0.0012`,"color('red')"],[`${distance}>0.0008`,`mix(color(yellow),color('red'),(${distance}-0.008)/0.0004`],[`${distance}<0.00001`,"color('white')"],["true",`mix(color('blue'),color('green'),${distance}/0.0004)`]]}})}function hideByHeight(){tileset.style=new Cesium.Cesium3DTileStyle({show:"${height} > 200"})}function ReturnSTModel(){return["http://222.184.234.26:5064/Data/SWDJ/320602/010025GB03200/ST/0001/tileset.json","http://222.184.234.26:5064/Data/SWDJ/320602/010025GB03200/ST/0002/tileset.json","http://222.184.234.26:5064/Data/SWDJ/320602/010025GB03200/ST/0005/tileset.json","http://222.184.234.26:5064/Data/SWDJ/320602/010025GB03200/ST/0006/tileset.json","http://222.184.234.26:5064/Data/SWDJ/320602/010025GB03200/ST/0009/tileset.json","http://222.184.234.26:5064/Data/SWDJ/320602/010025GB03200/ST/0010/tileset.json","http://222.184.234.26:5064/Data/SWDJ/320602/010025GB03200/ST/0011/tileset.json","http://222.184.234.26:5064/Data/SWDJ/320602/010025GB03200/ST/0012/tileset.json","http://222.184.234.26:5064/Data/SWDJ/320602/010025GB03200/ST/0015/tileset.json","http://222.184.234.26:5064/Data/SWDJ/320602/010025GB03200/ST/0016/tileset.json","http://222.184.234.26:5064/Data/SWDJ/320602/010025GB03200/ST/0017/tileset.json","http://222.184.234.26:5064/Data/SWDJ/320602/010025GB03200/ST/0018/tileset.json","http://222.184.234.26:5064/Data/SWDJ/320602/010025GB03200/ST/0019/tileset.json","http://222.184.234.26:5064/Data/SWDJ/320602/010025GB03200/ST/0020/tileset.json","http://222.184.234.26:5064/Data/SWDJ/320602/010025GB03200/ST/0021/tileset.json","http://222.184.234.26:5064/Data/SWDJ/320602/010025GB03200/ST/0022/tileset.json","http://222.184.234.26:5064/Data/SWDJ/320602/010025GB03200/ST/0023/tileset.json","http://222.184.234.26:5064/Data/SWDJ/320602/010025GB03200/ST/0024/tileset.json","http://222.184.234.26:5064/Data/SWDJ/320602/010025GB03200/ST/0025/tileset.json","http://222.184.234.26:5064/Data/SWDJ/320602/010025GB03200/ST/0026/tileset.json","http://222.184.234.26:5064/Data/SWDJ/320602/010025GB03200/ST/0027/tileset.json","http://222.184.234.26:5064/Data/SWDJ/320602/010025GB03200/ST/0028/tileset.json","http://222.184.234.26:5064/Data/SWDJ/320602/010025GB03200/ST/0029/tileset.json","http://222.184.234.26:5064/Data/SWDJ/320602/010025GB03200/ST/0030/tileset.json","http://222.184.234.26:5064/Data/SWDJ/320602/010025GB03200/ST/0031/tileset.json","http://222.184.234.26:5064/Data/SWDJ/320602/010025GB03200/ST/0032/tileset.json","http://222.184.234.26:5064/Data/SWDJ/320602/010025GB03200/ST/0033/tileset.json","http://222.184.234.26:5064/Data/SWDJ/320602/010025GB03200/ST/0034/tileset.json","http://222.184.234.26:5064/Data/SWDJ/320602/010025GB03200/ST/0035/tileset.json","http://222.184.234.26:5064/Data/SWDJ/320602/010025GB03200/ST/0036/tileset.json","http://222.184.234.26:5064/Data/SWDJ/320602/010025GB03200/ST/0037/tileset.json","http://222.184.234.26:5064/Data/SWDJ/320602/010025GB03200/ST/0038/tileset.json","http://222.184.234.26:5064/Data/SWDJ/320602/010025GB03200/ST/0039/tileset.json","http://222.184.234.26:5064/Data/SWDJ/320602/010025GB03200/ST/0040/tileset.json","http://222.184.234.26:5064/Data/SWDJ/320602/010025GB03200/ST/0041/tileset.json","http://222.184.234.26:5064/Data/SWDJ/320602/010025GB03200/ST/0042/tileset.json","http://222.184.234.26:5064/Data/SWDJ/320602/010025GB03200/ST/0043/tileset.json","http://222.184.234.26:5064/Data/SWDJ/320602/010025GB03200/ST/0044/tileset.json","http://222.184.234.26:5064/Data/SWDJ/320602/010025GB03200/ST/0045/tileset.json","http://222.184.234.26:5064/Data/SWDJ/320602/010025GB03200/ST/0046/tileset.json"]}function addClassification3Dtiles(n,t){var i=new Cesium.Cesium3DTileset({url:t,classificationType:Cesium.ClassificationType.CESIUM_3D_TILE});i.style=new Cesium.Cesium3DTileStyle({color:"color('blue', 0.8)"});n.scene.primitives.add(i)}function processContentFeatures(n,t){for(var r,u=n.featuresLength,i=0;i<u;++i)r=n.getFeature(i),t(r)}function processTileFeatures(n,t){var u=n.content,r=u.innerContents,f,i;if(Cesium.defined(r))for(f=r.length,i=0;i<f;++i)processContentFeatures(r[i],t);else processContentFeatures(u,t)}